window.addEventListener("load",(function e(){if(!window.jQuery||!window.Quill)return setTimeout(e,50);let t=Quill.import("blots/embed");class n extends t{static create(e){let t=super.create(e);return t.innerHTML=e,t}}n.blotName="span",n.className="spoiler",n.tagName="span";Quill.register({"formats/spoiler":n});let l=Quill.import("delta"),o=new Quill("#editor",{modules:{toolbar:{container:"#toolbar",handlers:{spoiler:function(){let e=document.createElement("span"),t=o.getSelection();t&&o.insertEmbed(t.index,"span",e)}}}},placeholder:"Write your review here!",theme:"snow"}),r=o.container.firstChild.innerHTML;$('[data-toggle="tooltip"]').tooltip();let a=new l;function i(e){let t=e.replace(/<p>/g,"").replace(/<\/p>/g,"\n").replace(/<strong>/g,"[b]").replace(/<\/strong>/g,"[/b]").replace(/<h1>/g,"[h1]").replace(/<\/h1>/g,"[/h1]\n").replace(/<em>/g,"[i]").replace(/<\/em>/g,"[/i]").replace(/<u>/g,"[u]").replace(/<\/u>/g,"[/u]").replace(/<ol>/g,"[olist]\n").replace(/<\/ol>/g,"[/olist]\n").replace(/<ul>/g,"[list]\n").replace(/<\/ul>/g,"[/list]\n").replace(/<li>/g,"[*]").replace(/<\/li>/g,"\n").replace(/<br>/g,"\n").replace(/<a href="/g,"[url=").replace(/" target="_blank">/g,"]").replace(/<\/a>/g,"[/url]").replace(/<s>/g,"[strike]").replace(/<\/s>/g,"[/strike]").replace(/<blockquote>/g,"[quote=author]").replace(/<\/blockquote>/g,"[/quote]\n").replace(/<span class="spoiler">/g,"[spoiler]").replace(/<\/span>/g,"[/spoiler]").replace(/<pre spellcheck="false">/g,"[code]").replace(/<\/pre>/g,"[/code]\n").replace(/<code>/g,"[noparse]").replace(/<\/code>/g,"[/noparse]");$("#markup").html(t),$("#preview").html(e)}function c(){let e=$(window).height(),t=$("#footer").height(),n=$("#footer").position().top+t;n<e&&$("#footer").css("margin-top",e-n+10+"px")}o.on("selection-change",(function(e,t,n){r=o.container.firstChild.innerHTML,i(r),e?$("#editorWindow").addClass("active"):$("#editorWindow").removeClass("active")})),o.on("text-change",(function(e,t,n){r=o.container.firstChild.innerHTML,i(r),a=a.compose(e)})),$("#previewCollapse").on("show.bs.collapse",(function(){o.blur(),console.log(r),document.getElementById("showBtn").innerHTML="Hide Preview"})),$("#previewCollapse").on("hide.bs.collapse",(function(){document.getElementById("showBtn").innerHTML="Show Preview",o.focus()})),$("#copyBtn").click((function(){!function(e){let t=document.createElement("textarea");t.id="t",t.style.height=0,document.body.appendChild(t),t.value=document.getElementById(e).innerText;let n=document.querySelector("#t");n.select(),n.setSelectionRange(0,99999),navigator.clipboard.writeText(n.value),document.body.removeChild(t),alert("Markup copied to clipboard!")}("markup")})),$("#closeBtn").click((function(){$("#help").fadeOut(1e3,(function(){c()}))})),setInterval((function(){a.length()>0&&(console.log("Saving changes",a),a=new l)}),5e3),window.onbeforeunload=function(){if(a.length()>0)return"There are unsaved changes. Are you sure you want to leave?"},$(document).ready((function(){c();let e=$(".fade");e.css({opacity:"0"}),e.fadeTo(500,1,"swing");let t=new Date,n=t.getDate(),l=t.toLocaleString("en-us",{month:"long"});$(".current-date").html(`${n} ${l}`)}))}),!1);