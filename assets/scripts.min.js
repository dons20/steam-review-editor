window.addEventListener("load",(function e(){if(!window.jQuery||!window.Quill)return setTimeout(e,50);let t=Quill.import("blots/embed");class l extends t{static create(e){let t=super.create(e);return t.innerHTML=e,t}}l.blotName="span",l.className="spoiler",l.tagName="span";Quill.register({"formats/spoiler":l});let n=Quill.import("delta"),o=new Quill("#editor",{modules:{toolbar:{container:"#toolbar",handlers:{spoiler:function(){let e=document.createElement("span"),t=o.getSelection();t&&o.insertEmbed(t.index,"span",e)}}}},placeholder:"Write your review here!",theme:"snow"}),r=o.container.firstChild.innerHTML;$('[data-toggle="tooltip"]').tooltip();let a=new n;function i(e){let t=e.replace(/<p>/g,"").replace(/<\/p>/g,"\n").replace(/<strong>/g,"[b]").replace(/<\/strong>/g,"[/b]").replace(/<h1>/g,"[h1]").replace(/<\/h1>/g,"[/h1]\n").replace(/<em>/g,"[i]").replace(/<\/em>/g,"[/i]").replace(/<u>/g,"[u]").replace(/<\/u>/g,"[/u]").replace(/<ol>/g,"").replace(/<\/ol>/g,"").replace(/((<li data-list="ordered">)(.*?)(<\/li>))+/g,"[olist]\n$&[/olist]").replace(/((<li data-list="bullet">)(.*?)(<\/li>))+/g,"[list]\n$&[/list]").replace(/<li (.*?)>/g,"\t[*]").replace(/<\/li>/g,"\n").replace(/<br>/g,"\n").replace(/<a href="/g,"[url=").replace(/" target="_blank">/g,"]").replace(/<\/a>/g,"[/url]").replace(/<s>/g,"[strike]").replace(/<\/s>/g,"[/strike]").replace(/<blockquote>/g,"[quote=author]").replace(/<\/blockquote>/g,"[/quote]\n").replace(/(<span class="ql-ui")(.*?)(<\/span>)/g,"").replace(/<span class="spoiler">/g,"[spoiler]").replace(/<\/span>/g,"[/spoiler]").replace(/<pre spellcheck="false">/g,"[code]").replace(/<\/pre>/g,"[/code]\n").replace(/<code>/g,"[noparse]").replace(/<\/code>/g,"[/noparse]"),l=o.getSemanticHTML().replaceAll("<blockquote>",'<blockquote><div class="font-italic quote-author">Originally posted by <b>author</b>:</div>');$("#markup").html(t),$("#preview").html(l)}function c(){let e=$(window).height(),t=$("#footer").height(),l=$("#footer").position().top+t;l<e&&$("#footer").css("margin-top",e-l+10+"px")}o.on("selection-change",(function(e,t,l){r=o.container.firstChild.innerHTML,i(r),e?$("#editorWindow").addClass("active"):$("#editorWindow").removeClass("active")})),o.on("text-change",(function(e,t,l){r=o.container.firstChild.innerHTML,i(r),a=a.compose(e)})),$("#previewCollapse").on("show.bs.collapse",(function(){o.blur(),document.getElementById("showBtn").innerHTML="Hide Preview"})),$("#previewCollapse").on("hide.bs.collapse",(function(){document.getElementById("showBtn").innerHTML="Show Preview",o.focus()})),$("#copyBtn").click((function(){!function(e){let t=document.createElement("textarea");t.id="t",t.style.height=0,document.body.appendChild(t),t.value=document.getElementById(e).innerText;let l=document.querySelector("#t");l.select(),l.setSelectionRange(0,99999),navigator.clipboard.writeText(l.value),document.body.removeChild(t),alert("Markup copied to clipboard!")}("markup")})),$("#closeBtn").click((function(){$("#help").fadeOut(1e3,(function(){c()}))})),setInterval((function(){a.length()>0&&(a=new n)}),5e3),window.onbeforeunload=function(){if(a.length()>0)return"There are unsaved changes. Are you sure you want to leave?"},$(document).ready((function(){c();let e=$(".fade");e.css({opacity:"0"}),e.fadeTo(500,1,"swing");let t=new Date,l=t.getDate(),n=t.toLocaleString("en-us",{month:"long"});$(".current-date").html(`${l} ${n}`)}))}),!1);