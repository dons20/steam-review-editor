window.addEventListener("load",(function e(){if(!window.jQuery||!window.Quill)return setTimeout(e,120);const t=Quill.import("blots/inline"),l=Quill.import("blots/block/embed");Quill.register("formats/spoiler",class extends t{static blotName="spoiler";static className="spoiler";static tagName="span";static create(){return super.create()}static formats(){return!0}optimize(e){super.optimize(e),this.domNode.tagName!==this.statics.tagName&&this.replaceWith(this.statics.blotName)}}),Quill.register("formats/divider",class extends l{static blotName="divider";static tagName="hr"});const o=Quill.import("delta"),i=new Quill("#editor",{modules:{toolbar:{container:"#toolbar",handlers:{divider:function(){const e=i.getSelection(!0);i.insertText(e.index,"",Quill.sources.USER),i.insertEmbed(e.index,"divider",!0,Quill.sources.USER),i.setSelection(e.index+1,Quill.sources.SILENT)}}}},formats:["header","bold","italic","underline","strike","blockquote","code","code-block","divider","spoiler","list","link"],placeholder:"Write your review here!",theme:"snow"});let r=i.container.firstChild.innerHTML;$('[data-toggle="tooltip"]').tooltip();let n=new o;function a(e){let t=e.replace(/<p>/g,"").replace(/<\/p>/g,"\n").replace(/<strong>/g,"[b]").replace(/<\/strong>/g,"[/b]").replace(/<hr>/g,"[hr][/hr]\n").replace(/<h1>/g,"[h1]").replace(/<\/h1>/g,"[/h1]\n").replace(/<h2>/g,"[h2]").replace(/<\/h2>/g,"[/h2]\n").replace(/<h3>/g,"[h3]").replace(/<\/h3>/g,"[/h3]\n").replace(/<em>/g,"[i]").replace(/<\/em>/g,"[/i]").replace(/<u>/g,"[u]").replace(/<\/u>/g,"[/u]").replace(/<ol>/g,"").replace(/<\/ol>/g,"").replace(/((<li data-list="ordered">)(.*?)(<\/li>))+/g,"[olist]\n$&[/olist]\n").replace(/((<li data-list="bullet">)(.*?)(<\/li>))+/g,"[list]\n$&[/list]\n").replace(/<li (.*?)>/g,"\t[*]").replace(/<\/li>/g,"\n").replace(/<br>/g,"\n").replace(/<a href="/g,"[url=").replace(/" target="_blank">/g,"]").replace(/<\/a>/g,"[/url]").replace(/<s>/g,"[strike]").replace(/<\/s>/g,"[/strike]").replace(/<blockquote>/g,"[quote=author]").replace(/<\/blockquote>/g,"[/quote]\n").replace(/(<span class="ql-ui")(.*?)(<\/span>)/g,"").replace(/<span class="spoiler">(.*?)<\/span>/g,"[spoiler]$1[/spoiler]").replace(/<span contenteditable="false">/g,"").replace(/<\/span>/g,"[/spoiler]").replace(/<pre spellcheck="false">/g,"[code]").replace(/<\/pre>/g,"[/code]\n").replace(/<code>/g,"[noparse]").replace(/<\/code>/g,"[/noparse]"),l=i.getSemanticHTML().replaceAll("<blockquote>",'\n        <blockquote>\n          <div class="font-italic quote-author">Originally posted by <b>author</b>:</div>\n      ');$("#markup").html(t),$("#preview").html(l)}function c(){let e=$(window).height(),t=$("#footer").height(),l=$("#footer").position().top+t;l<e&&$("#footer").css("margin-top",e-l+10+"px")}i.on("selection-change",(function(e,t,l){r=i.container.firstChild.innerHTML,a(r),e?$("#editorWindow").addClass("active"):$("#editorWindow").removeClass("active")})),i.on("text-change",(function(e,t,l){r=i.container.firstChild.innerHTML,a(r),n=n.compose(e)})),$("#previewCollapse").on("show.bs.collapse",(function(){i.blur(),document.getElementById("showBtn").innerHTML="Hide Preview"})),$("#previewCollapse").on("hide.bs.collapse",(function(){document.getElementById("showBtn").innerHTML="Show Preview",i.focus()})),$("#copyBtn").click((function(){!function(e){let t=document.createElement("textarea");t.id="t",t.style.height=0,document.body.appendChild(t),t.value=document.getElementById(e).innerText;let l=document.querySelector("#t");l.select(),l.setSelectionRange(0,99999),navigator.clipboard.writeText(l.value),document.body.removeChild(t),alert("Markup copied to clipboard!")}("markup")})),$("#closeBtn").click((function(){$("#help").fadeOut(1e3,(function(){c()}))})),setInterval((function(){n.length()>0&&(n=new o)}),5e3),window.onbeforeunload=function(){if(n.length()>0)return"There are unsaved changes. Are you sure you want to leave?"},$(document).ready((function(){c();let e=$(".fade");e.css({opacity:"0"}),e.fadeTo(500,1,"swing");let t=new Date,l=t.getDate(),o=t.toLocaleString("en-us",{month:"long"});$(".current-date").html(`${l} ${o}`)}))}),!1);